Parameters:
  InstanceId:
    Type: String
  AlarmName:
    Type: String   
  AlarmActions:
    Type: String
Resources:
  CPUCreditBalance:
    Type: AWS::CloudWatch::Alarm
    Properties: 
      AlarmName:
        Ref: AlarmName
      AlarmDescription: CPU Balance Is Lower Than
      MetricName: CPUCreditBalance
      Namespace: AWS/EC2
      Statistic: Average
      Dimensions:
        - Name: InstanceId
          Value: 
            Ref: InstanceId
      ComparisonOperator: LessThanOrEqualToThreshold
      DatapointsToAlarm: 1
      EvaluationPeriods: 1
      Period: 300
      Threshold: 30
      AlarmActions: 
        - Ref: AlarmActions